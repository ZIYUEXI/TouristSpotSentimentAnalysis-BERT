# 旅游景点数据分析系统综述
本项目旨在采集、分析并可视化**携程**和**马蜂窝**等旅游网站上的热门**景点信息**。通过全面的数据分析流程，从数据爬取到结果的可视化展示，尤其重点在于使用**BERT模型**对评论文本进行**深度的情感分析**。

1. 数据采集
利用**selenium**和**requests**对目标旅游网站进行**自动化爬取**。
对爬取的数据初步进行清洗，例如处理空值，并首先**保存为JSON格式**。
数据进一步经过模型优化后，存储到**MongoDB数据库**。
2. 数据预处理
清除可能的重复、缺失或错误数据。
对数据进行关键字段的提取，并进行格式转换与标准化处理。
如有多个数据源，会进行整合为单一的CSV格式。
3. 深度文本分析
使用先进的BERT模型对用户评论进行情感分析，识别和提取其中的正面和负面情绪。
通过此分析，能够更准确地**评估各景点的用户满意度和受欢迎程度**。
4. 统计与可视化
根据景点的地理信息（例如省份、城市）进行数据统计。
利用Pyecharts工具，生动地展示各种分析结果，包括地图、热力图和柱状图等。

# 数据采集及预处理
利用爬虫工具对**携程**和**马蜂窝**等网站进行数据抓取。在携程网站上，首先从攻略景点目录获取了全国所有省市的URL。这些URL是通过直接复制页面中的相应div并利用BS4进行清洗得到的。分析URL后，发现景点的URL和省市的URL有共同部分，例如“shanghai2”，可以通过字符串替换得到。
在评论数据爬取方面，携程的评论是通过JS与后端交互的，面临两个选择：1) 直接爬取JS接口；2) 使用selenium模拟点击获取数据。考虑到携程对JS接口的反爬机制，选择了**selenium**。由于selenium爬取较慢，采用了selenium Hub进行分布式爬取，并使用Docker进行虚拟化。
对于酒店数据，由于携程的数据保护机制强，选择从马蜂窝网站上爬取。但马蜂窝有验证码机制，所以使用了验证码识别工具。
数据预处理部分，进行了缺失值处理、数据去重、格式化、类型转换、归一化和**标准化**。计划筛选**热度大于5**的景点，且需要将评论与其所属的省市进行匹配

![image](https://github.com/ZIYUEXI/TouristSpotSentimentAnalysis-BERT/assets/63457521/9b6a7a0a-fa61-431e-bd85-31d80847b32c)


# 数据统计与分析
首先, 统计了各省的**景点数据**，如**热度**和**评分的总和**、**平均值**、**中位数**和**景点数量**，并将结果**存入MongoDB**。接着，使用**doccano平台**对评论进行**数据标注**，并采用BERT进行分类，创建五个模型分别对餐饮、住宿、景点、交通等大类和细分类进行情感分析。随机**选择了1000条评论进行训练**。

![image](https://github.com/ZIYUEXI/TouristSpotSentimentAnalysis-BERT/assets/63457521/e5207b95-0452-4b6f-8636-e2fa32d9971f)


# 数据可视化和在线查询
利用**Django**搭建了一个网站**并用pyecharts完成数据可视化**。网站展示了全国各景点的评分中位数、热度中位数和景点数量。还从500条评论生成了词云图，并设计了一个**数据查询解释器**，能够**从MongoDB提取并可视化数据**。此外，实现了一个**在线数据爬取功能**，通过**命令查询指定的网址**并通过**BERT**将评论的内容进行**情感分析**。所有这些任务是通过**分布式框架celery**来实现的，利用**docker配置了redis**作为**消息中间件**，并**通过Django向多个节点发布任务**。

![image](https://github.com/ZIYUEXI/TouristSpotSentimentAnalysis-BERT/assets/63457521/964cc448-26ff-4760-965b-9cbfca8de311)
